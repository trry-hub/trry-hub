# ğŸ’» ç³»ç»Ÿå®‰è£…åè¦åšçš„é‚£äº›äº‹

## ä¸€ã€å¸¸ç”¨è½¯ä»¶å®‰è£…ï¼ˆæ‰€æœ‰å¹³å°é€šç”¨ï¼‰

### ğŸŒ² Node.js ç¯å¢ƒç®¡ç†ï¼ˆNVMï¼‰
:::tip æç¤º
å»ºè®®å…ˆå®‰è£… `jq` å·¥å…·ï¼Œç”¨äºæ›´å¥½çš„ JSON è§£æä½“éªŒï¼š
```bash
# macOS
brew install jq
# Ubuntu/Debian
sudo apt install jq
# CentOS/RHEL
sudo yum install jq
```
:::

1. å®‰è£… [NVM (Node Version Manager)](https://github.com/nvm-sh/nvm)
```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
```

2. é…ç½® NVM ç¯å¢ƒå˜é‡
```bash
# ~/.zshrc æˆ– ~/.bashrc
# NVM é…ç½®
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
```

3. å®‰è£…å’Œä½¿ç”¨ Node.js
```bash
# å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬
nvm install --lts
# ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬
nvm use 18
# è®¾ç½®é»˜è®¤ç‰ˆæœ¬
nvm alias default 18
# æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬
nvm ls
```

4. å®‰è£… pnpmï¼ˆæ¨èï¼‰
```bash
npm install -g pnpm
```

5. ï¼ˆæ¨èï¼‰NVM è‡ªåŠ¨ç‰ˆæœ¬åˆ‡æ¢åŠŸèƒ½
å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° `~/.zshrc`ï¼Œå®ç°æ ¹æ®é¡¹ç›® `package.json` çš„ `engines.node` å­—æ®µè‡ªåŠ¨åˆ‡æ¢ Node.js ç‰ˆæœ¬ï¼š

**ğŸŒŸ å¼ºå¤§åŠŸèƒ½**ï¼š
- æ”¯æŒæ‰€æœ‰æ ‡å‡†ç‰ˆæœ¬è¡¨è¾¾å¼ï¼š`>=18.0.0`ã€`^18.0.0`ã€`18.0.0 || 20.0.0` ç­‰
- æ™ºèƒ½ç‰ˆæœ¬æ¯”è¾ƒï¼šç²¾ç¡®åŒ¹é… npm engines è¯­ä¹‰
- ä¼˜åŒ–ç‰ˆæœ¬é€‰æ‹©ï¼šä¼˜å…ˆä½¿ç”¨å·²å®‰è£…çš„å…¼å®¹ç‰ˆæœ¬
- è¯¦ç»†çŠ¶æ€åé¦ˆï¼šæ¸…æ™°çš„åˆ‡æ¢æç¤ºå’Œé”™è¯¯å¤„ç†

```bash
# Auto NVM Version Switcher
# æ ¹æ®å½“å‰é¡¹ç›®çš„ package.json engines å­—æ®µè‡ªåŠ¨åˆ‡æ¢ Node.js ç‰ˆæœ¬
auto_nvm_switch() {
    local original_dir="$(pwd)"
    local package_json_path=""
    local search_dir="$original_dir"

    # æŸ¥æ‰¾æœ€è¿‘çš„ package.json æ–‡ä»¶
    while [[ "$search_dir" != "/" ]]; do
        if [[ -f "$search_dir/package.json" ]]; then
            package_json_path="$search_dir/package.json"
            break
        fi
        search_dir="$(dirname "$search_dir")"
    done

    if [[ -n "$package_json_path" ]]; then
        # ä½¿ç”¨ jq æå– engines.node ç‰ˆæœ¬
        local target_version=""
        if command -v jq >/dev/null 2>&1; then
            target_version=$(jq -r '.engines.node // empty' "$package_json_path" 2>/dev/null)
        else
            # å¤‡ç”¨æ–¹æ¡ˆï¼šä½¿ç”¨ grep å’Œ sed - ä¸“é—¨æŸ¥æ‰¾ engines.node
            target_version=$(grep -A2 '"engines"' "$package_json_path" | grep '"node"' | sed 's/.*"node": *"\([^"]*\)".*/\1/')
        fi

        if [[ -n "$target_version" && "$target_version" != "null" ]]; then
            # è·å–å½“å‰ç‰ˆæœ¬
            local current_version=""
            if command -v node >/dev/null 2>&1; then
                current_version=$(node --version | sed 's/^v//')
            fi

            # ä½¿ç”¨æ™ºèƒ½ç‰ˆæœ¬é€‰æ‹©é€»è¾‘ï¼Œç±»ä¼¼ npm çš„ engines æ ¡éªŒ
            local selected_version=""

            # ç®€åŒ–çš„ç‰ˆæœ¬æ¯”è¾ƒå‡½æ•°ï¼ˆå¦‚æœæ²¡æœ‰ nodeï¼‰
            version_compare() {
                local v1="$1" v2="$2" op="$3"

                # ä½¿ç”¨ sort -V è¿›è¡Œç‰ˆæœ¬æ¯”è¾ƒ
                case "$op" in
                    "gt")
                        [[ "$(printf '%s\n' "$v1" "$v2" | sort -V | tail -1)" == "$v1" && "$v1" != "$v2" ]]
                        ;;
                    "gte")
                        [[ "$(printf '%s\n' "$v1" "$v2" | sort -V | tail -1)" == "$v1" ]]
                        ;;
                    "lt")
                        [[ "$(printf '%s\n' "$v1" "$v2" | sort -V | head -1)" == "$v1" && "$v1" != "$v2" ]]
                        ;;
                    "lte")
                        [[ "$(printf '%s\n' "$v1" "$v2" | sort -V | head -1)" == "$v1" ]]
                        ;;
                    *)
                        return 1
                        ;;
                esac
            }

            # æ£€æŸ¥å½“å‰ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³ engines è¦æ±‚ï¼ˆç®€åŒ–é€»è¾‘ï¼‰
            if [[ -n "$current_version" ]]; then
                local satisfies=false

                case "$target_version" in
                    ">="*)
                        local min_version="${target_version#">="}"
                        if version_compare "$current_version" "$min_version" "gte"; then
                            satisfies=true
                        fi
                        ;;
                    ">"*)
                        local min_version="${target_version#">"}"
                        if version_compare "$current_version" "$min_version" "gt"; then
                            satisfies=true
                        fi
                        ;;
                    "<="*)
                        local max_version="${target_version#"<="}"
                        if version_compare "$current_version" "$max_version" "lte"; then
                            satisfies=true
                        fi
                        ;;
                    "<"*)
                        local max_version="${target_version#"<"}"
                        if version_compare "$current_version" "$max_version" "lt"; then
                            satisfies=true
                        fi
                        ;;
                    "||"*)
                        # OR è¡¨è¾¾å¼ï¼šæ£€æŸ¥æ˜¯å¦æ»¡è¶³ä»»ä¸€æ¡ä»¶
                        local or_versions=($(echo "$target_version" | tr '|' ' '))
                        for version in "${or_versions[@]}"; do
                            version=$(echo "$version" | xargs) # å»é™¤ç©ºæ ¼
                            case "$version" in
                                ">="*)
                                    local min_version="${version#">="}"
                                    if version_compare "$current_version" "$min_version" "gte"; then
                                        satisfies=true
                                        break
                                    fi
                                    ;;
                                "^"*)
                                    local base_version="${version#^}"
                                    # ^ ç‰ˆæœ¬å…è®¸ç›¸åŒä¸»ç‰ˆæœ¬çš„æ–°æ¬¡ç‰ˆæœ¬
                                    local current_major=$(echo "$current_version" | cut -d. -f1)
                                    local base_major=$(echo "$base_version" | cut -d. -f1)
                                    if [[ "$current_major" == "$base_major" ]] && version_compare "$current_version" "$base_version" "gte"; then
                                        satisfies=true
                                        break
                                    fi
                                    ;;
                                *)
                                    # ç²¾ç¡®åŒ¹é…
                                    if [[ "$current_version" == "$version" ]]; then
                                        satisfies=true
                                        break
                                    fi
                                    ;;
                            esac
                        done
                        ;;
                    "^"*)
                        local base_version="${target_version#^}"
                        # ^ ç‰ˆæœ¬å…è®¸ç›¸åŒä¸»ç‰ˆæœ¬çš„æ–°æ¬¡ç‰ˆæœ¬
                        local current_major=$(echo "$current_version" | cut -d. -f1)
                        local base_major=$(echo "$base_version" | cut -d. -f1)
                        if [[ "$current_major" == "$base_major" ]] && version_compare "$current_version" "$base_version" "gte"; then
                            satisfies=true
                        fi
                        ;;
                    *)
                        # ç²¾ç¡®åŒ¹é…
                        if [[ "$current_version" == "$target_version" ]]; then
                            satisfies=true
                        fi
                        ;;
                esac

                # å¦‚æœå½“å‰ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ï¼Œæ— éœ€åˆ‡æ¢
                if [[ "$satisfies" == true ]]; then
                    return 0
                fi
            fi

            # é€‰æ‹©æœ€ä½³ç‰ˆæœ¬
            case "$target_version" in
                ">="*)
                    selected_version=${target_version#">="}
                    # ä¼˜å…ˆä½¿ç”¨å·²å®‰è£…çš„æ›´é«˜ç‰ˆæœ¬
                    if [[ -n "$current_version" ]] && version_compare "$current_version" "$selected_version" "gte"; then
                        return 0  # å½“å‰ç‰ˆæœ¬å·²è¶³å¤Ÿ
                    fi
                    ;;
                ">"*)
                    selected_version=${target_version#">"}
                    ;;
                "<"*|"<="*)
                    # å¯¹äºå°äºèŒƒå›´ï¼Œæå–ç¬¬ä¸€ä¸ªç‰ˆæœ¬å·
                    selected_version=$(echo "$target_version" | grep -oE '[0-9]+\.[0-9]+\.[0-9]+' | head -1)
                    ;;
                "||"*)
                    # å¯¹äº OR è¡¨è¾¾å¼ï¼Œå–æœ€é«˜ç‰ˆæœ¬
                    selected_version=$(echo "$target_version" | grep -oE '[0-9]+\.[0-9]+\.[0-9]+' | sort -V | tail -1)
                    ;;
                "^"*)
                    # ^ ç‰ˆæœ¬ï¼šä¼˜å…ˆä½¿ç”¨å…¼å®¹çš„æ›´é«˜ç‰ˆæœ¬
                    local base_version=${target_version#^}
                    selected_version="$base_version"
                    # æ£€æŸ¥æ˜¯å¦æœ‰å…¼å®¹çš„æ›´é«˜ç‰ˆæœ¬
                    if [[ -n "$current_version" ]]; then
                        local current_major=$(echo "$current_version" | cut -d. -f1)
                        local base_major=$(echo "$base_version" | cut -d. -f1)
                        if [[ "$current_major" == "$base_major" ]] && version_compare "$current_version" "$base_version" "gte"; then
                            return 0  # å½“å‰ç‰ˆæœ¬å·²å…¼å®¹
                        fi
                    fi
                    ;;
                *)
                    # å¤„ç†å…¶ä»–æƒ…å†µ
                    selected_version=$(echo "$target_version" | grep -oE '[0-9]+\.[0-9]+\.[0-9]+' | head -1)
                    ;;
            esac

            # å¦‚æœéœ€è¦åˆ‡æ¢ç‰ˆæœ¬
            if [[ -n "$selected_version" && "$current_version" != "$selected_version" ]]; then
                echo "ğŸ”„ Auto switching Node.js from v$current_version to v$selected_version (engines: $target_version)"

                # æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦å·²å®‰è£…
                if nvm ls "$selected_version" >/dev/null 2>&1; then
                    nvm use "$selected_version" >/dev/null 2>&1
                    echo "âœ… Switched to Node.js v$selected_version"
                else
                    echo "ğŸ“¦ Installing Node.js v$selected_version..."
                    nvm install "$selected_version" >/dev/null 2>&1
                    if [[ $? -eq 0 ]]; then
                        nvm use "$selected_version" >/dev/null 2>&1
                        echo "âœ… Installed and switched to Node.js v$selected_version"
                    else
                        echo "âŒ Failed to install Node.js v$selected_version"
                        return 1
                    fi
                fi
            fi
        fi
    fi
}

# æ·»åŠ åˆ° prompt å‡½æ•°ä¸­ï¼Œæ¯æ¬¡è¿›å…¥ç›®å½•æ—¶è‡ªåŠ¨æ£€æŸ¥
autoload -U add-zsh-hook
add-zsh-hook chpwd auto_nvm_switch

# ä¸ºç°æœ‰çš„ shell ä¼šè¯ä¹Ÿè§¦å‘ä¸€æ¬¡
auto_nvm_switch
```

6. æ‰“å° Nodeã€npmã€pnpm ç‰ˆæœ¬
```bash
# ~/.zshrc
echo "\033[1m\033[32mNode\033[0m $(node -v 2>/dev/null || echo 'æœªå®‰è£…') Â· \033[34mnpm\033[0m $(npm -v 2>/dev/null || echo 'æœªå®‰è£…') Â· \033[35mpnpm\033[0m $(pnpm -v 2>/dev/null || echo 'æœªå®‰è£…')"
```

### ğŸ”’ VPN å·¥å…·
- **macOS**ï¼š[anyconnect-macos](https://cdnfile.yaomaitong.cn/vpn/anyconnect-macos-4.9.04053.dmg)ï¼ˆä»…å‹¾é€‰ VPNï¼‰  
- **Windows**ï¼š[anyconnect_win.zip](https://cdnfile.yaomaitong.cn/vpn/anyconnect_win.zip)  
- **iPhone**ï¼šApp Store æœç´¢ **AnyConnect**  
- **Android**ï¼š[OpenConnect.apk](https://cdnfile.yaomaitong.cn/vpn/OpenConnect-1.15-1152.apk)  

:::warning æç¤º
ä½¿ç”¨ VPN å‰å…ˆå®‰è£…ä¸ªäºº `.p12` æ–‡ä»¶ï¼Œç„¶åè¿æ¥ï¼š`vpn.yaomaitong.cn:4433`
:::

### ğŸ–±ï¸ è¾…åŠ©å·¥å…·
- Windows é¼ æ ‡ç‚¹å‡»æ•ˆæœï¼š[ClickShow](https://github.com/cuiliang/ClickShow/releases/tag/1.4.1)  
- macOS é¼ æ ‡æŒ‡é’ˆï¼š[macOS-cursor](https://zhutix.com/ico/macos-cursor-21/)  
- Windows é¼ æ ‡æŒ‡é’ˆï¼š[Windows æŒ‡é’ˆä¸»é¢˜](https://zhutix.com/ico/macos-cursor-21/)  

## äºŒã€åˆ†å¹³å°é…ç½®æ–¹æ¡ˆ

### ğŸ”¹ Windows

#### 1. å¼€æœºè‡ªå¯åŠ¨
è·¯å¾„ï¼š  
```text
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp
```
ğŸ‘‰ å»ºè®®å°† **uTools**ã€**Snipaste** ç­‰å¼€æœºè‡ªå¯åŠ¨çš„è½¯ä»¶å¿«æ·æ–¹å¼æ”¾å…¥å…¶ä¸­ã€‚  

#### 2. PowerShell è„šæœ¬æ‰§è¡Œæƒé™
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShellï¼š  
```powershell
set-executionpolicy remotesigned
```

#### 3. å®‰è£… WSL
1. å‚è€ƒå®‰è£…æ•™ç¨‹ï¼šhttps://bbs.huaweicloud.com/blogs/350759  
2. é‡å¯åï¼Œåœ¨ Microsoft Store ä¸­å®‰è£…ï¼š  
  [Windows Subsystem for Linux](https://apps.microsoft.com/store/detail/windows-subsystem-for-linux/9P9TQF7MRM4R)  

#### 4. PowerShell ç¾åŒ–ï¼ˆOh My Poshï¼‰
1. å®‰è£… [Oh My Posh](https://ohmyposh.dev/)  
2. å†™å…¥ `$PROFILE`ï¼š  
```powershell
oh-my-posh init pwsh --config $env:POSH_THEMES_PATH\M365princess.omp.json | Invoke-Expression
```
3. å­—ä½“æ¨èï¼š**CaskaydiaCove NFM**  
4. æŸ¥çœ‹ä¸»é¢˜ï¼š  
```powershell
Get-PoshThemes
```

---

### ğŸ”¹ macOS

#### 1. Homebrew
å®‰è£… [Homebrew](https://brew.sh/)ï¼Œä¾¿äºè½¯ä»¶åŒ…ç®¡ç†ã€‚  

#### 2. Zsh ç¾åŒ–
æ¨èä½¿ç”¨ **[Starship](https://starship.rs/)**ï¼š  

```bash
brew install starship
```
zsh é…ç½®ï¼š
```bash
# ~/.zshrc
# Starship åˆå§‹åŒ–
if command -v starship >/dev/null 2>&1; then
  eval "$(starship init zsh)"
fi
```
æ‰§è¡Œ `source ~/.zshrc` ä½¿é…ç½®ç”Ÿæ•ˆ

##### é…ç½® Starship
åˆ›å»º `~/.config/starship.toml` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```toml
# ~/.config/starship.toml
format = """
$username\
$git_branch\
$nodejs\
$character"""
# åœ¨æç¤ºç¬¦ä¹‹é—´æ’å…¥ç©ºè¡Œ
add_newline = false

# ä½¿ç”¨å†…ç½®çš„usernameæ¨¡å—è€Œä¸æ˜¯env_var
[username]
style_user = "#17A8CD"
format = "[$user](#17A8CD):"
show_always = true

[git_branch]
# æ˜¾ç¤ºå½“å‰çš„ Git åˆ†æ”¯
format = "[$branch](#D670D6) "

[nodejs]
# æ˜¾ç¤º Node.js ç‰ˆæœ¬
format = "[$version](#23D184) "

[character]
# ç¡®å®šæç¤ºç¬¦å­—ç¬¦çš„æ˜¾ç¤ºï¼Œæ ¹æ®ä¸Šæ¬¡å‘½ä»¤çš„æˆåŠŸæˆ–å¤±è´¥æ˜¾ç¤ºä¸åŒçš„é¢œè‰²
success_symbol = "[âœ](bold green)"
error_symbol = "[âœ](bold red)"
```

æ­¤é…ç½®ä¼šæ˜¾ç¤ºç”¨æˆ·åã€Gitåˆ†æ”¯ã€Node.jsç‰ˆæœ¬ï¼Œå¹¶æ ¹æ®å‘½ä»¤æ‰§è¡Œç»“æœæ˜¾ç¤ºä¸åŒé¢œè‰²çš„æç¤ºç¬¦ã€‚

---

### ğŸ”¹ Linux (Ubuntu / Debian ç¤ºä¾‹)

#### 1. æ›´æ–°ç³»ç»Ÿ
```bash
sudo apt update && sudo apt upgrade -y
```

#### 2. å®‰è£…å¸¸ç”¨å·¥å…·
```bash
sudo apt install -y curl git vim build-essential
```

#### 3. å®‰è£… Zsh + Starship
```bash
sudo apt install -y zsh
sh -c "$(curl -fsSL https://starship.rs/install.sh)"
echo 'eval "$(starship init zsh)"' >> ~/.zshrc
chsh -s $(which zsh)
```

#### 4. Node.js ç¯å¢ƒé…ç½®
æŒ‰ç…§ç¬¬ä¸€éƒ¨åˆ†ä¸­çš„ NVM å®‰è£…æŒ‡å—é…ç½® Node.js ç¯å¢ƒã€‚  

---

## ä¸‰ã€å­—ä½“æ¨è
- [MiSans](https://web.vip.miui.com/page/info/mio/mio/detail?postId=33935854)  
- [Recursive](https://github.com/arrowtype/recursive)  
- CaskaydiaCove NFM ï¼ˆæ¨èç»™ PowerShell / VSCode ä½¿ç”¨ï¼‰

---

## âœ… æ€»ç»“
æœ¬æŒ‡å—åˆ†ä¸º **Windows / macOS / Linux ä¸‰å¥—ç‹¬ç«‹æ–¹æ¡ˆ**ï¼š

- ğŸªŸ Windows â†’ PowerShell + WSL + Oh My Posh
- ğŸ macOS â†’ Zsh + Starship + NVM Node ç®¡ç†
- ğŸ§ Linux â†’ Zsh + Starship + ç³»ç»Ÿå·¥å…·

æŒ‰æ­¥éª¤é€ä¸€æ‰§è¡Œï¼Œå³å¯å¿«é€Ÿå®Œæˆæ–°æœºå™¨çš„å¼€å‘ç¯å¢ƒåˆå§‹åŒ–ã€‚
